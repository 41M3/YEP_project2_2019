<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Gamepad</title>
  <link rel="stylesheet" href="css/gamepadStyle.css">

    <script src="https://cdn.rawgit.com/32teeth/html5-plugin-canvas-gamepad/master/CanvasGamepad.js"></script>

</head>

<body>
<canvas id="controller" style="width:80%"></canvas>
<script>
    CanvasGamepad.setup(
        {
            //layout:"BOTTOM_LEFT",
            //canvas:"controller",
            //start:{name:"start", key:"b"},
            //select:{name:"select", key:"v"},
            //trace:true,
            //debug:true,
            //hint:true,
            buttons:[
                {name:"FIRE", color:"red"},
                {name:"b"},
                {name:"x"},
                {name:"y"}
            ]
        }
    );
    setInterval(
        function()
        {
            var map = CanvasGamepad.observe();
            var x = parseInt(map["x-dir"]);
            var y = parseInt(map["y-dir"]);

            if(map["FIRE"] === 1) {
                console.log("fire");
            }

          if(x === 0 && y === 1) {
                clickDown();
                //console.log("down");
            }
            if(x === 0 && y === -1) {
                clickUp();
                //console.log("up");
            }
            if(x === 1 && y === 0) {
                clickRight();
                //console.log("right");
            }
            if(x === -1 && y === 0) {
                clickLeft();
                //console.log("left");
            }
        }
        ,1000
    );
</script>

<!--<div id="arrow">
  <button class="arrow-left" onclick="clickLeft()"></button>
    <button class="arrow-right" onclick="clickRight()"></button>
    <button class="arrow-up" onclick="clickUp()"></button></button>
    <button class="arrow-down" onclick="clickDown()"></button>
</div>

<div id="arrow" style="width:35%">
    <svg width="300%" height="100%" viewBox="0 0 290 90">
        <circle cx="220" cy="50" r="15" fill=red stroke="black" stroke-width="2px" onclick="alert('CENTER');" />
        <circle cx="50" cy="50" r="10" fill="#cccccc" stroke="black" stroke-width="0.5px" onclick="alert('CENTER');" />
        <path class="arrow-up" d="M50,14 54,22 46,22Z" fill=blue onclick="clickUp()" />
        <path class="arrow-down" d="M50,86 54,78 46,78Z" fill=blue onclick="clickDown()" />
        <path class="arrow-left" d="M14,50 22,54 22,46Z" fill=red onclick="clickLeft()" />
        <path class="arrow-right" d="M86,50 78,54 78,46Z" fill=red onclick="clickRight()" />
    </svg>
</div> -->

<script src="/socket.io/socket.io.js"></script>
<script src="js/socket/socket_gamepad.js"></script>

</body>

</html>